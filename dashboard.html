<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Key System Pro</title>

<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:#0f172a;
    color:white;
}

/* NAVBAR */
.navbar{
    background:#111827;
    padding:15px;
    display:flex;
    align-items:center;
    gap:15px;
    font-size:20px;
}

.menu-btn{
    cursor:pointer;
    font-size:22px;
}

/* SIDEBAR */
.sidebar{
    position:fixed;
    top:0;
    left:-250px;
    width:220px;
    height:100%;
    background:#1e293b;
    transition:.3s;
    padding-top:60px;
}

.sidebar a{
    display:block;
    padding:15px;
    color:white;
    text-decoration:none;
    border-bottom:1px solid #334155;
}

.sidebar a:hover{
    background:#334155;
}

.sidebar.active{
    left:0;
}

.overlay{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,.5);
    display:none;
}

.overlay.active{
    display:block;
}

/* CONTAINER */
.container{
    padding:20px;
    max-width:500px;
    margin:20px auto;
}

/* CARD */
.card{
    background:#1e293b;
    padding:20px;
    border-radius:10px;
    margin-bottom:20px;
}

button{
    background:#7c3aed;
    border:none;
    padding:10px 15px;
    color:white;
    border-radius:5px;
    cursor:pointer;
}

button:hover{
    opacity:.8;
}

select,input{
    width:100%;
    padding:10px;
    margin-bottom:10px;
    border-radius:5px;
    border:none;
}

.key-box{
    background:#0f172a;
    padding:10px;
    border-radius:5px;
    margin-bottom:10px;
    border-left:4px solid #7c3aed;
}
.expired{
    border-left:4px solid red;
}
</style>
</head>

<body>

<div class="navbar">
    <div class="menu-btn" onclick="toggleMenu()">â˜°</div>
    <div>Key System Pro</div>
</div>

<div class="overlay" onclick="toggleMenu()" id="overlay"></div>

<div class="sidebar" id="sidebar">
    <a onclick="showTab('dashboard')">ðŸ“Š Dashboard</a>
    <a onclick="showTab('gerador')">ðŸ”‘ Gerador</a>
    <a onclick="showTab('keys')">ðŸ“‚ Minhas Keys</a>

</div>

<div class="container">

<!-- DASHBOARD -->
<div id="dashboard" class="card">
    <h2>Dashboard</h2>
    <p>CrÃ©ditos: <span id="creditDisplay">0</span></p>
    <p>Total de Keys: <span id="totalKeys">0</span></p>
</div>

<!-- GERADOR -->
<div id="gerador" class="card" style="display:none;">
    <h2>Gerar Key</h2>

    <label>Validade</label>
    <select id="validade">
        <option value="1">1 Dia</option>
        <option value="7">7 Dias</option>
        <option value="30">30 Dias</option>
    </select>

    <button onclick="generateKey()">Gerar</button>
</div>

<!-- KEYS -->
<div id="keys" class="card" style="display:none;">
    <h2>Minhas Keys</h2>
    <div id="keysList"></div>
</div>

</div>

<script>

let credits = parseInt(localStorage.getItem("credits")) || 5;
let keys = JSON.parse(localStorage.getItem("keys")) || [];

updateUI();

function toggleMenu(){
    document.getElementById("sidebar").classList.toggle("active");
    document.getElementById("overlay").classList.toggle("active");
}

function showTab(tab){
    document.getElementById("dashboard").style.display="none";
    document.getElementById("gerador").style.display="none";
    document.getElementById("keys").style.display="none";

    document.getElementById(tab).style.display="block";
    toggleMenu();
}

function generateKey(){

    if(credits <= 0){
        alert("Sem crÃ©ditos!");
        return;
    }

    let dias = parseInt(document.getElementById("validade").value);
    let expiration = new Date();
    expiration.setDate(expiration.getDate() + dias);

    let newKey = {
        code: "KEY-" + Math.random().toString(36).substr(2,9).toUpperCase(),
        expires: expiration.getTime()
    };

    keys.push(newKey);
    credits--;

    saveData();
    updateUI();
}

function updateUI(){

    document.getElementById("creditDisplay").innerText = credits;
    document.getElementById("totalKeys").innerText = keys.length;

    let list = document.getElementById("keysList");
    list.innerHTML="";

    let now = Date.now();

    keys.forEach(k=>{
        let expired = now > k.expires;
        let box = document.createElement("div");
        box.className = "key-box" + (expired ? " expired" : "");
        box.innerHTML = `
            <strong>${k.code}</strong><br>
            Expira em: ${new Date(k.expires).toLocaleDateString()}<br>
            Status: ${expired ? "EXPIRADA" : "ATIVA"}
        `;
        list.appendChild(box);
    });
}

function addCredits(){
    credits += 10;
    saveData();
    updateUI();
    alert("10 crÃ©ditos adicionados (ADM)");
}

function saveData(){
    localStorage.setItem("credits", credits);
    localStorage.setItem("keys", JSON.stringify(keys));
}

</script>

</body>
</html>
